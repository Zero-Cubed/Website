#Zero Cubed
##Web Authentication API

This document explains the Zero Cubed web authentication API and how to use it in your applications.

##Basic Mechanism

The ZeroÂ³ Web Auth API works using a token system. Applications supply a username and password to the api, and receive a token in return that must be used in all future requests during that session. These tokens are randomly-generated strings stored in a database and have an expiration date for security.

##Request Mechanism

Each request proceeds in the following way

1. The client application accesses the API over HTTP, by calling https://janskyd.com/~jansky/zc-auth/api.php, and passes parameters via query string. All requests require an `appsecret` and `method` to be specified.
2. The API performs the requested action
3. The API returns a JSON object, containing at the least a status code indicating the success request.

###Status Codes

The status codes returned by the API are based on HTTP status codes.

* 200 - OK
* 401 - Invalid appsecret
* 403 - Token needed but not specified
* 404 - Result not found, data specified (e.g. username or password) is incorrect
* 460 - Needed parameters not specified
* 461 - A token was supplied when it should not have been supplied
* 500 - Internal server error
* 503 - System overloaded or down for maintenance
* 540 - Database error

##Methods

##gettoken

The gettoken method takes an access code generated by the login page and returns the corresponding user's token. It returns all the same values as the login method.

**Parameters**: accesscode
<br/>
**Return if successful**:  `{"userid":userid,"token":"user's token","expiration":UNIX timestamp,"status":200}`

####Example Request

**Request:** `https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&method=gettoken&accesscode=356f35241fa7ec41b3972d6f06498fbe`
<br/>
**Return:** `{"userid":1,"token":"a57be47912ab3a3475f61696269c1681","expiration":1464647916,"status":200}`

###login

The login method authenticates a user and generates a token for them. If the user's supplied credentials are incorrect, it returns a status of 404. If you're developing a website that uses the API, please **don't** use this method. Instead, get an access code from the login page and use the gettoken method.

**Parameters**: username, password
<br/>
**Return if successful**:  `{"userid":userid,"token":"user's token","expiration":UNIX timestamp,"status":200}`

####Example Request

**Request:** `https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&method=login&username=test&password=testtest`
<br/>
**Return:** `{"userid":1,"token":"a57be47912ab3a3475f61696269c1681","expiration":1464647916,"status":200}`

###verify

The verify method can be used to verify a token. If the token is valid, it returns a status of 200. If not, it returns a status of 403.

**Parameters**: token
<br/>
**Return if successful**: `{"status":200}`

####Example Request

**Request:** `https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&method=verify&token=a57be47912ab3a3475f61696269c1681`
<br/>
**Return:** `{"status":200}`

###refresh

The refresh method refreshes a token to prevent it from expiring. A successful call to the refresh method will change the expiration time of the user's token to 45 minutes + the current time.

**Parameters**: token
<br/>
**Return if successful**: `{"expiration":UNIX time stamp of new expiration time, "status":200}`

####Example request

**Request:** `https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&method=refresh&token=a57be47912ab3a3475f61696269c1681`
<br/>
**Return:** `{"expiration":1464649454,"status":200}`





