<h1>Zero Cubed</h1>

<h2>Web Authentication API</h2>

<p>This document explains the Zero Cubed web authentication API and how to use it in your applications.</p>

<h2>Basic Mechanism</h2>

<p>The ZeroÂ³ Web Auth API works using a token system. Applications supply a username and password to the api, and receive a token in return that must be used in all future requests during that session. These tokens are randomly-generated strings stored in a database and have an expiration date for security.</p>

<h2>Request Mechanism</h2>

<p>Each request proceeds in the following way</p>

<ol>
<li>The client application accesses the API over HTTP, by calling https://janskyd.com/~jansky/zc-auth/api.php, and passes parameters via query string. All requests require an <code>appsecret</code> and <code>method</code> to be specified.</li>
<li>The API performs the requested action</li>
<li>The API returns a JSON object, containing at the least a status code indicating the success request.</li>
</ol>


<h3>Status Codes</h3>

<p>The status codes returned by the API are based on HTTP status codes.</p>

<ul>
<li>200 - OK</li>
<li>401 - Invalid appsecret</li>
<li>403 - Token needed but not specified</li>
<li>404 - Result not found, data specified (e.g. username or password) is incorrect</li>
<li>460 - Needed parameters not specified</li>
<li>461 - A token was supplied when it should not have been supplied</li>
<li>500 - Internal server error</li>
<li>503 - System overloaded or down for maintenance</li>
<li>540 - Database error</li>
</ul>


<h2>Methods</h2>

<h2>gettoken</h2>

<p>The gettoken method takes an access code generated by the login page and returns the corresponding user&rsquo;s token. It returns all the same values as the login method.</p>

<p><strong>Parameters</strong>: accesscode
<br/>
<strong>Return if successful</strong>:  <code>{"userid":userid,"token":"user's token","expiration":UNIX timestamp,"status":200}</code></p>

<h4>Example Request</h4>

<p><strong>Request:</strong> <code>https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&amp;method=gettoken&amp;accesscode=356f35241fa7ec41b3972d6f06498fbe</code>
<br/>
<strong>Return:</strong> <code>{"userid":1,"token":"a57be47912ab3a3475f61696269c1681","expiration":1464647916,"status":200}</code></p>

<h3>login</h3>

<p>The login method authenticates a user and generates a token for them. If the user&rsquo;s supplied credentials are incorrect, it returns a status of 404. If you&rsquo;re developing a website that uses the API, please <strong>don&rsquo;t</strong> use this method. Instead, get an access code from the login page and use the gettoken method.</p>

<p><strong>Parameters</strong>: username, password
<br/>
<strong>Return if successful</strong>:  <code>{"userid":userid,"token":"user's token","expiration":UNIX timestamp,"status":200}</code></p>

<h4>Example Request</h4>

<p><strong>Request:</strong> <code>https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&amp;method=login&amp;username=test&amp;password=testtest</code>
<br/>
<strong>Return:</strong> <code>{"userid":1,"token":"a57be47912ab3a3475f61696269c1681","expiration":1464647916,"status":200}</code></p>

<h3>verify</h3>

<p>The verify method can be used to verify a token. If the token is valid, it returns a status of 200. If not, it returns a status of 403.</p>

<p><strong>Parameters</strong>: token
<br/>
<strong>Return if successful</strong>: <code>{"status":200}</code></p>

<h4>Example Request</h4>

<p><strong>Request:</strong> <code>https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&amp;method=verify&amp;token=a57be47912ab3a3475f61696269c1681</code>
<br/>
<strong>Return:</strong> <code>{"status":200}</code></p>

<h3>refresh</h3>

<p>The refresh method refreshes a token to prevent it from expiring. A successful call to the refresh method will change the expiration time of the user&rsquo;s token to 45 minutes + the current time.</p>

<p><strong>Parameters</strong>: token
<br/>
<strong>Return if successful</strong>: <code>{"expiration":UNIX time stamp of new expiration time, "status":200}</code></p>

<h4>Example request</h4>

<p><strong>Request:</strong> <code>https://janskyd.com/~jansky/zc-auth/api.php?appsecret=JVapLItBH0ytdJCsa&amp;method=refresh&amp;token=a57be47912ab3a3475f61696269c1681</code>
<br/>
<strong>Return:</strong> <code>{"expiration":1464649454,"status":200}</code></p>
